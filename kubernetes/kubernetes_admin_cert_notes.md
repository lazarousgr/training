# CKAD Certifications notes for John

## Docker vs Containerd

Docker is the full suite of container management whereas containerd is the engine that controls the lifecycle of containers. Docker used containerd in its core.   
Initially kubernetes was designed to work only with docker. Later kubernetes introduced Container Runtime Interface (CRI) which defines the spec (OCI) that container runtimes should conform to so Kubernetes can support them as container runtimes.  
Docker didn’t adopt the OCI so Kubernetes continued supporting docker through dockershim. v1.24 dockershim support was dropped.

Containerd comes with **ctr** tool but it is very limited and used only for debugging purposes  
**nerdctrl** is docker like CLI for containerd

**crictl** developed by kubernetes and is capable of controlling all container runtimes that adhere to the OCI. It is more like a debugging tool.

**etcd** is distributed, reliable key-value store

## Kube-apiserver

kube-api server is the only component interacting with etcd. kube-api sits in the center of the control plane and all activity takes place through it

## Kube-scheduler

kube-scheduler polls etcd through the kube-api and if there is a new pod created then it schedules it to the right node. The scheduler only decides and updates kube-api about the decision. The api notifies the corresponding kubelet to run the pod.

Pod  
Pods are usually hosting one container. Multi containers is also an option but it is not practical to use the same containers. More like different container apps within the same pod.  
This help in having the same networking, volumes etc  
Overall one container per pod is the best practice because it helps in applying new architectural changes.

## Controller Manager \- Set of Controllers

### Node Manager

Monitors the status of the nodes

### Replication Controller

Replication controller ensures that a number of application pods is running at all times.  
Replication Controller is replaced by Replica Set  
Main diff is the selector

## 

## DaemonSets vs ReplicaSets

Daemonsets are being used to ensure that 1 pod is getting created on each node being used usually for use cases like network agents (flannel) or monitoring

## Namespace

Namespace definition for a resource goes under metadata

## Static Pods

Can be created using the kubelet on the note  
kubelet monitors staticPodPath dir for added/removed/modified yaml files and acts upon 

Labels and Selectors  
Used to group kubernetes objects and filter. Labels are defined in the metadata section

kubectl –selector label=value1

Resource requirements and limits  
If a pod will try to consume additional CPU then kubernetes will throttle and stick to the limit.  
If a pod will try to allocate additional memory beyond the limit then Pod will be terminated with a OOM exception.

#### For CPU

Make sure that each pod has a request set. This is the only way to guarantee that all pods will get some resource and not get prevented from getting any.

##### How to set the default values for a cluster

![][image1]

Limit range affects only new pods created after limit range is created/updated

##### Resource Quotas

Used to limit the overall resource allocation that applications are consuming and it is applied at the namespace level

[image1]: <data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKUAAAEbCAYAAAC7nERrAAAW8UlEQVR4Xu2dTYvkyBGG63/4J/myNPSPsftihr4a5uaLD8bQOzffvJeFgb3UgA+Dm6E9YGYxyzTTPe3xug+D7ZusyMjIjExlSiqVqiqkeh9IukpSSfXxdOgjQ5GbL1++NGhox2hj2eQvREM7VBsLpEQ7WhsLpEQ7WhsLpEQ7WhvLJp8AwKmBlMAcR5bya7PZfMonHpivzc3lp+b6TT4dWAVSAnMcWcqU7YtPraSPybT8+Zr48HLTvH1507y9ushnAcUeUj43D/4RyXXzkR9ft5Fwc/nFzaMIRY81qXTPbnlZT/PxS3Px7Vf38OHbR79OXkagSLt58ewe0/rltRftdHnthZ8fePMU3p88l4hN25HH7r2HbX3N3vu2nbdptxHebZW3V+prvbvuSJg/Byl7SKlQMiWSuR+/PxJG+fjx1j1KRdRS6d1/XJ7Xm4inyaR0/yxBXN6903uWfyhhs3kKj/n5RX0bivdKyvtXHB01kLKfvaR0Ucs3LWWAZNXPm66UISKpZSV66SbHhPVjUhaZ5ouogUxK2o4+xpR/DHq9fA4il3I0TzfN+zt++PbqurlP50LKASZKGaML81yUkuXKo00uJUuSRK+CzEJdykgnao6IlMSQlGMjJcEyboOc6TxI2cdEKdPjSH08p6XU04WSlE6SLHrp9WtqUurXkkxJtBw8puT31C/l+GNKgnbh719dNz/nMxpIOcRkKWsku28AJgApgTkgJTDH7FICsC+QEpgDUgJzQEpgjjOQ8sElQpQuYtegvuvb1+OuR4L52UvK/GLzKbk9sEjUh51fCHf92lfSrrO5YCqTpCz1TbOclC+pekFUd+GF7/pzy/ssIkH6rPNuvYdvL0bnQZalfAjSfFCrvr26aJ9vXc+KiEXCaclCZH26ceuO8nGChSwvov78+iKJxmHZV7FviV9H2+2+12T9SnCZli+/ZiZJKZQipe4G1F14JKfMcxLqfm6/Dupa1N2DN5ebdrmkw7BKWUrP3XVHytuXF5zfSNJ05nd397VIqaWUddBjwQntxWTBeF4ifrt9frx13ZOyTlq/JHPQes6FvT5pSUotls7GSTJzQkpblqJGkTbPhRzJblKyECSlEyBIkc7X1KQcimQkqEQ+nTFE8vFr+JhXy03L6Nc5ss+wZmaXkiJfSDNTu+milH73nhwKLExKnka7ZH1MybvofHdclrLpREoiPV7lBilHkKaARVyWTitcLYfR3Qbhkmlj2liJ/Y8pPTNIKRFMo0Wldcl8EkgYjpRRxIRCxvq5UPg2doGliic6DN97k8qmI2Keklabt6uUOqq4H/yJ7odR0/0JSk1KkqMU4YR8PWn0pJMqL50TipcdlrLpvE/9D6SnnwsH+aQsZbqvybO9gcef3UdY7nPmAFLy7Q35jhRSVsilpCirLiOdIweQEoD9gJTAHJASmANSAnNASmCOo0pJl4rys/IxjHpdz73iYFlASmCOaVI6AR59ytlj6DYUcTr92O3ySf82taRmj0zPK1LE5YOUal3S+yM9SLrJNVHpcaKWc73ZDMsOjs4eUtKPzN2MdKlXREiyfrICV4MRr13eyZRFvdrrksg4GCm7F/UhpU1mkZJ+WJEyKcsyUq6AzzDKaxDVXpf8AwxK2XSkBDY5rJQZJbloWkjCGCGl3g0PSkm7epXFBCmXwexSJpLltLvnNP8y7v6l6BQfC8bkX5ezefmopPTS+2PLiFqXoLbnji0zKalgVfW9gpMxu5REctLRqeSbT38Ozx98pHR46UgaipwiUzxxeSqUiPHrKrwXF8VxTLkIpkkJwAGBlMAckBKYY5KU7969a75+tVGEAKwPSAnMASmBOSDl3nAxgRy5b3s0dG+Ov0tSU5q2dnb41iKQUlOWci4g5UimSNlX4CpebOeuRZf184IvhMuF+ngnJA86KhfWEz7ejKo9VC5wpe7bDsuN+Xq6UurqFoGnG7dNut+b7uuW+8cdcp+4uosxv4+d32MfD/x6fw+5Lszgaib5dch09x7b5WU7uvhCXp1DiOs5bJGEMd96h2lSsmiEpLp18FlCnIr2qLoJY4aP7hPvVNcYLSX/IKGqhS5GEMTwP/IgXSkd+a2zJItbn7+v24sYKW9vfKRM/6mSYgeBWLeIxfNyqfeavu4h/OOkFULK73UuCt/mMFOllGhXldJ3M4b5ksoWpEwLYJUSPMZQq5DBP5QvBKCGsutnvJS8Pv9DH0LKEctKVQ/3WSVSq/ealr+R99T9jGO2NZXCtznMnFKWsoTGSjmVmpTxy+/+CHUqy1qRMkRoZkhKvauP76/yGQ/EpC3NJ2U5S6guZZbYm0G1hzab4ZIndSkJXzGtIEiZyg82l5RJ5OqjImW7HXm9CNcnpXw3HTK5D0nh2xxmPimJbpZQn5Q6E8idCGl2OKasS5kVNO0hPyGQ1xQLZfVIWVsPwQWyokx1KlI2sUiWHKL0Sam355os06Sfa8z3M5WjSbkctiMj0zrJr0AUyxQemElbXK+UaVXdcySPghLNj8mkLa5XSmABSAnMMUlKAA4JpATmgJTAHJASmANSAnPsIeWz6od+9r0tfog73/siBQAIzvzhDB/q3YlFCSgVLVbV0OlouwyDB9bDdCl14QAFSRn6Q1SBK93NmJRlaZfp5EV6dhlHByyb/373XXg8XcpGV6uIka5W30f3V8fX9I84Bs6DT7/4RWjEXlIKJJ5Eu7qUT2mdH8/UnEiwHuaT8k3MAKfdcUlKfezIUbU04iVl/ahschxTniX/+dOfwuPpUlboFp0CYDcgJTAHpATmmF1KAPYFUgJzTJIS+ZTgkEBKYI6jSVnq/QlQd2S4W3EYV22jeM0TrIGjSSkUpZyD0pAlYJFASmAOI1J2awRtLn2Bq0vqwizNz2oRVaTUfe55NhLG0bGJYSlrFTJ2lfLTLPWHwPFYvZScu8knWWAZrEdKNXRemW7FNow4ZpOjScmXcVRLbpOIbajAVZ4snNIdBk9vNwdS2uRoUgIwFkgJzAEpgTkgJTAHpATmgJTAHJASmGMRUo6+NzwMBrUfupqHMPo9gL1ZlZS03Bx3iUPK02JaSt1zE4Wgglg8Lc/wKYkTk4tjj05Sy6jQPZlI6fvUk54knZD88aadP+lrBBUmfZsHlzJLrtCy9Y3NWJIyErsqd5LSU103pJydSd/moaVMpdFCdBM3tCj585yDSAlmZ9FS5nTEaSOuXh5SLgOTUmpR6C9ln4sQpZxJoSOOOhuXAq5uvh8HksiPN4mSlLUzex4PcjPLCRZgjErZcJTb8MkMRbYoW31sxo6UTZSOJNMnKJL8u1U1Ml0V4qSld0ziROc4TPo2jyIlOFsgJTAHpATmOIqUtPwu7LJusD4gJTAHpATmgJTAHJByD35+fdG8vdqE9rOaF6a/0pfVt817P/0DisZVWZWUckE89Lx8/OIuvtNFdZqeXjivdzNSD02nR6cASXmfT2y5vVJf6911K+GFe/j25U0Q98NLL6ybf+1ec9++wzD9jFmNlFR5I09l6/R9+2JXc0oZImIrnBAfb5vb11snWvN007y/i6+7F1ndX/oZtkFakfhcWY+UuutPyMaPFHGHpJwC7ZYlajopQ4Tk6BelfFARUqSk5bYhQkLKCUDKAq10t6/5HaTHl3wc6aRr/+poSbttSNllPVJWdt+JlKXUNZUxFJYbufvWkGRy8rL7MSWk1KxGSsq1lFsf9IlOzPhJq72VsoSEsVLev4pn3vnZtEyX6OmgaOqnhxMkSNlhRVIWyCIlWAaQEphj3VKCRQIpgTkgJTAHpATmgJRnAfcqyYV760DKswBSdoCU/dSyjVwv0R1fcNfohA957LotQ48Rd2kmF+4XxDqkfPPUbH39IeqhcT04PjuoNLjTheuSpPvHHytpbfk95c+ul0imy7XPdJl0rB8pUjCGopTU00PC+V6gGtL7Q71LH176rs72tRQZWcqHaq+TVeqftgeLUnLX4jOL4cR67Fw8l9Q1V0WtlZa6F13Hnh+vJ+8/j9LxegWpoEFCc8cgyyyP+fluUpZS4ByDUl67vyQlL3vd3LbrcF2gOi+TRIWUkWNIyTI9O9lESomCuv+blhOpSEoX2UTKLNMoZg/xervE2kYUfWehlSc59qtJ6fMweXft0+P8dIq6TkotOKRMOZWUefQS5pMyRl8dSfdCpcCF5wUpObGDo2QipQdSDnAqKV0k89JoalJKESxGi1iXUqJxvo2by83o3XcgZKErClLyrRMaydmMhHxNAVKmHFzKU1LIxwT7ASn3xEXKuXbdwAEp94AiZCfbHewNpATmgJTAHCalBOcNpATmWISUpVrmNWLvze4X5XQPEO7tOR2rklL3Re9DaXSI0ntIuzF3/yeYm7TIwnJZnZRjlhtiFyllGnVJzvEPsQ+Q8sBS6qiX//iCFBjQ6WbSwvg5ch1RjYMzVLZlipS0TtmWfuyGQQlJG/F96W0k61aZTfo70OMH6fd7rS7c16Xctq/ZtNvOP4FNTEqZf7nxR7M1DJ7efeuBn5JqHGGcSc7JFIakzL+D2L/PUubvj+i8ZqEsTMp0YCdqQ1K63ElpB5Ayvq/4fvP3SG1XKbXw0mLvUXkk3/x7WyompeQkBx9tfKSRH62vnzkXR+9GiaKUhYSKkpT0mvyYUW8vJAw36a42kkZ52mZJStqOm66/gx6SbfW8Zvtis5guUZtSEgsYBi/dXpoml6zH/yOF6NfKmYsf1/vcne6bIO+d33+G/yfT74WAlBmTpFw5uZQgAilPBKSsAylPBKSsAymBOUxKucu6wfqAlMAckBKYA1ICc0DKPcDYjIdhVVJKTwfGZlw2q5EyL07lwNiMi2Q9UmZ1gBydqmuHGwYPYzPOB6ScSUqMzTgf65GysvtOpByZujZ2963B2IzzsRopKXUMYzOugxVJWQDD4C0SSAnMsW4pwSKBlMAckBKYA1ICc0DKswDD4HWAlP30ZRu5i+z6YnyTLi/L0jR9TbRzjXRBrEPKNxgGD8PgGZTy4pIygFp5LnlQJ+lGDDflk7ShuNSjW871AJG8vk4P9wjFPvFkTB0nPCNdmkmfuVo/scs4OkUphR2kdBH0FWUlXWAYvCGOISX3e/ePODY4DF5WVWJwxDH/OiLvqpwGJ28kgvZJSdHUiRdHHCMZKUJCygGsSClUpcwyjQalbKLIfTWOdgLD4K1bSl0+T1OVMss0ikkcdSm5LN/XZNdN7HJMqdHZRo6SlO00EjJG1O4weJBygJNJ2aiiUtRU8dKSlDrTKD/RqUlZSn0jdpEyZhspIVVGUX6ioqfxGXhXypCv6QTOl7fNuG8tw5yUJ8RJP9euGzgg5Z7ku3ywP5ASmANSAnOYlBKcN5ASmANSAnNASmAOSAnMYVJKd0H6BWfmyDg64a5EdS93uD7opsVkClpeDzdCvSu4q3E52JXS911zn3KaqyjogY10EkZ+MRtSLgu7UlLXneqTTkuulPqnG46Y6PJbPIuTUouYFqbiQlWzFKsCJ2WBUsYxG7Wg8TaFdDg6yjV0WeAvSpmVwCImpQTnDaQE5oCUwByQEpgDUgJzmJRyl3WD9QEpgTkgJTAHpNwXPzhTtewK2BlIuRc8ogPdtw0p52M1UnIRAe6CfPjWFyeQNDdXSCAWFOgf3OmhoSICu3RLQsp5WY2UpdS2fHQIuUe7X8rdgZTzshIpv5bLqkDKRbISKaNwCbmUBxoGD1LOy2qkpGgnouljyiCXqiWpRewmC+OY8tSsRsoiGHFskUBKYA5ICcyxbinBIoGUwByQEpgDUgJzQMqFkg5Zsi4gpRVcCpwehoTRI0ScC5M+qTkp3yx5bMY4MFMipc/TLBFE1ePkrIjypx7AopRLHptR0FK60Wt7pOsM3rQidvvWPBalLA3ulA+DJzLVBnc69diMWkoXDf3YijL4kx4xDFJmLFVKoSrlicdm7I2U2TB2kDJjKVLG6SlVKbP0t1BMq0fKOcdm1FLyMHY8bLIDUvazGCmbpY3N6JsaErk0pmI+1uLamPSJzEl5QjA24/xAyj3Jd/lgfyAlMIdJKcF5AymBOSAlMMcipcwHbwLrYpFSgnVjUsq+YfA4SnavDbqL2752UH6zGEYcWxZ2pbz0w+BRNs/HtCxL6YI198JIZpC+dohxdJaGYSnLgzsl8xV6fjLAKFgckBKY4yykxDHlsliclCHjJ8vkgZTrwaSU4LyBlMAckBKYA1ICc0BKYA5ICcwBKYE5ICUwB6Tci/IwePRc7tHWlS70Y7qnW9/HDSKrklKKU4XCAB+/uGyhchGr+uBOY8fRkcJUuZQkX8AVquKiAlQ8QO7ddhUwSFBfbY1ec++LXen7vs+R1UhZvNWV8itVypuUWJlLSiGXMlau2Da3r7cs79NN8/6Op1L1i3uRNVRX2wZpk8oYZ8hKpLQ1DB7JFUuw+FJ/Tspt816iaCIlSciHAu71kHJ37EnZJAkZgVNJqUqskGws4tZN19HSVeKFlB1WI6WlYfD0czpWvH3N/y76cYikkLLDaqTUxan0iU5Mc5MKaoycFFHl37y25NhjyjGFqURCR7sLlyq8acVeSKlZkZQFMOLYIoGUwBzrlhIsEkgJzAEpgTkgJTAHpDwLuFdJLtxbB1IaoXutk3uCagX347xr95x6iPQ10c410gUBKQ1AF+Ed/uI6o/rJM0jAPOq5bsuQhcRdmpCyh4NL6QphLX8YPCJ2UdalLI2fQ69zYr6irKQL7m3SKXDZODyWKX/qAUxK6YRgkcI4Op2EDBbUlRNsZSQJ3c9WHdxJpNOCxgoclKcpP3s+utku4+hE+NhPop3efcfI+OBky7sxXbR1kfa6uW2lhZQDHEPK0uBOycBOvv+blqsN7pRnGg0PgxdT5ij67kvef67RsuplXISU9DjijhM9nJQ9w+hZZtVSxukpVSk7kfJ4w+CRkDHdrYvelWvZWMburh5SDnAyKd3Y3+nItERNSndMqY8jg4h1KSUa59vY6ZiSMoUKx4mRh3CWTejbLSTDKJcy5GsKkDLl4FKeEpWbCeYBUu5JvssH+wMp94AiJIScH0gJzDFZyvvHfzef//2/UY2Wz6ehnV8bC6REO1obC6REO1obC6Q03v72W+5OzKcvsY3FtJSbzefOtJO1H/8Q+pvf/aUwf1T7oXm3EsGmtLGYlPJXSX81tz/TvO8/N7/8/XNY7s+/9tPbtvn1v5rPd/90y/7qe7Xt31NxAV5HdzutYIXtd1or5F+/+6k7vW1/DUkTvwnTSLx/fPdNmP73dlp8HpteZ5wu6/kpRMm3V98k23z72z+4beTr+PyX34T1xOV/4GWK847bxmJSSmndSPncbL75Z3hO8sZlSbwH//ih+d1dXIcTtxVWC83zNmG5vkZC/e3H8nSJmn//4yYs44T54w/usROrlYhfU4mUP8p8FpEkDvOcTJmUV3FbWjJajqf/ELbvHivZa5/lGG0sC5Pyf80vtYhKUHosUe9333xykZOipERSXl+UdXxjUf7RmZ4K4Z638tFyWjyOkBL9KlLq1gqaHB4UpUyjsiynZaMIzuvRgp62jWVxUtIu3In1vY+AsuwIKac2HQV168gyUcpk/TNJGRukLLbpUvLuOG3PbjdMx5PJskpKiqbuuFIE7qyD2+hjyvYHLx1TpoL5Y7dseiolR910PZmoU6XMX6fWDykLbaqUJFVyouMbSad33dT0SZGeTvKGeXQypOaNlpKaOlHQP344QQnHjX1SUvspvCaK7o/7KNKKXHRyJev2TQ4hilKGbcX3w8tDymKbLGWlhZMXPU1FSjSbbSzLk7KNnvqSjzRIab+NZXlSoi22jQVSoh2tjWWSlAAcEkgJzPF/UMBNy1+loXUAAAAASUVORK5CYII=>